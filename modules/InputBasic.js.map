{"version":3,"sources":["../source/InputBasic.js"],"names":["InputBasic","state","onChange","event","props","value","newValue","target","format","indexOf","slice","setState","storeInput","ref","input","country","metadata","text","focus","rest"],"mappings":";;;;;;;;;;;;;AAGA;;;AAHA;;;;AACA;;AAGA;;;;AACA;;;;;;;;;;;;;;AAEA;;;;;;IAOqBA,U;;;;;;;;;;;;;;4LAUpBC,K,GAAQ,E,QAERC,Q,GAAW,UAACC,KAAD,EACX;AAAA,OACSD,QADT,GACsB,MAAKE,KAD3B,CACSF,QADT;AAAA,OAESG,KAFT,GAEmB,MAAKJ,KAFxB,CAESI,KAFT;;;AAIC,OAAIC,WAAW,0CAA2BH,MAAMI,MAAN,CAAaF,KAAxC,CAAf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAIC,aAAaD,KAAjB,EACA;AACC,QAAI,MAAKG,MAAL,CAAYF,QAAZ,EAAsBG,OAAtB,CAA8BN,MAAMI,MAAN,CAAaF,KAA3C,MAAsD,CAA1D,EACA;AACC;AACAC,gBAAWA,SAASI,KAAT,CAAe,CAAf,EAAkB,CAAC,CAAnB,CAAX;AACA;AACD;;AAED;AACA;AACA;AACA,SAAKC,QAAL,CAAc,EAAEN,OAAOC,QAAT,EAAd,EAAmC;AAAA,WAAMJ,SAASI,QAAT,CAAN;AAAA,IAAnC;AACA,G,QAcDM,U,GAAa,UAACC,GAAD;AAAA,UAAS,MAAKC,KAAL,GAAaD,GAAtB;AAAA,G;;;;;yBAZNR,K,EACP;AAAA,gBAC+B,KAAKD,KADpC;AAAA,OACSW,OADT,UACSA,OADT;AAAA,OACkBC,QADlB,UACkBA,QADlB;;;AAGC,UAAO,iCAAkBX,KAAlB,EAAyBU,OAAzB,EAAkCC,QAAlC,EAA4CC,IAAnD;AACA;;;0BAGD;AACC,QAAKH,KAAL,CAAWI,KAAX;AACA;;;2BAKD;AAAA,iBASG,KAAKd,KATR;AAAA,OAIEF,QAJF,WAIEA,QAJF;AAAA,OAKEa,OALF,WAKEA,OALF;AAAA,OAMEC,QANF,WAMEA,QANF;AAAA,OAOKG,IAPL;;AAWC;AACA;AACA;;;AAbD,OAcSd,KAdT,GAcmB,KAAKJ,KAdxB,CAcSI,KAdT;;;AAgBC,UACC,oDACKc,IADL;AAEC,SAAK,KAAKP,UAFX;AAGC,WAAO,KAAKJ,MAAL,CAAYH,KAAZ,CAHR;AAIC,cAAU,KAAKH,QAJhB,IADD;AAOA;;;;AA7ED;AACA;AACA;kDAEA;AAAA,OADkCG,KAClC,SADkCA,KAClC;;AACC,UAAO,EAAEA,YAAF,EAAP;AACA;;;;;;kBARmBL,U","file":"InputBasic.js","sourcesContent":["import React, { PureComponent } from 'react'\r\nimport { polyfill as reactLifecyclesCompat } from 'react-lifecycles-compat'\r\n\r\n// Both these functions are exported from `react-phone-number-input`.\r\nimport parsePhoneNumberCharacters from './parsePhoneNumberCharacters'\r\nimport formatPhoneNumber from './formatPhoneNumber'\r\n\r\n/**\r\n * `InputBasic`'s caret is not as \"smart\" as the default `inputComponent`'s\r\n * but still works good enough. When erasing or inserting digits in the middle\r\n * of a phone number the caret usually jumps to the end: this is the expected\r\n * behaviour and it's the workaround for the [Samsung Galaxy smart caret positioning bug](https://github.com/catamphetamine/react-phone-number-input/issues/75).\r\n */\r\n@reactLifecyclesCompat\r\nexport default class InputBasic extends PureComponent\r\n{\r\n\t// Prevents React from resetting the `<input/>` caret position.\r\n\t// https://github.com/reactjs/react-redux/issues/525#issuecomment-254852039\r\n\t// https://github.com/facebook/react/issues/955\r\n\tstatic getDerivedStateFromProps({ value })\r\n\t{\r\n\t\treturn { value }\r\n\t}\r\n\r\n\tstate = {}\r\n\r\n\tonChange = (event) =>\r\n\t{\r\n\t\tconst { onChange } = this.props\r\n\t\tconst { value } = this.state\r\n\r\n\t\tlet newValue = parsePhoneNumberCharacters(event.target.value)\r\n\r\n\t\t// By default, if a value is something like `\"(123)\"`\r\n\t\t// then Backspace would only erase the rightmost brace\r\n\t\t// becoming something like `\"(123\"`\r\n\t\t// which would give the same `\"123\"` value\r\n\t\t// which would then be formatted back to `\"(123)\"`\r\n\t\t// and so a user wouldn't be able to erase the phone number.\r\n\t\t// Working around this issue with this simple hack.\r\n\t\tif (newValue === value)\r\n\t\t{\r\n\t\t\tif (this.format(newValue).indexOf(event.target.value) === 0)\r\n\t\t\t{\r\n\t\t\t\t// Trim the last digit (or plus sign).\r\n\t\t\t\tnewValue = newValue.slice(0, -1)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Prevents React from resetting the `<input/>` caret position.\r\n\t\t// https://github.com/reactjs/react-redux/issues/525#issuecomment-254852039\r\n\t\t// https://github.com/facebook/react/issues/955\r\n\t\tthis.setState({ value: newValue }, () => onChange(newValue))\r\n\t}\r\n\r\n\tformat(value)\r\n\t{\r\n\t\tconst { country, metadata } = this.props\r\n\r\n\t\treturn formatPhoneNumber(value, country, metadata).text\r\n\t}\r\n\r\n\tfocus()\r\n\t{\r\n\t\tthis.input.focus()\r\n\t}\r\n\r\n\tstoreInput = (ref) => this.input = ref\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\t// value,\r\n\t\t\tonChange,\r\n\t\t\tcountry,\r\n\t\t\tmetadata,\r\n\t\t\t...rest\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\t// Prevents React from resetting the `<input/>` caret position.\r\n\t\t// https://github.com/reactjs/react-redux/issues/525#issuecomment-254852039\r\n\t\t// https://github.com/facebook/react/issues/955\r\n\t\tconst { value } = this.state\r\n\r\n\t\treturn (\r\n\t\t\t<input\r\n\t\t\t\t{...rest}\r\n\t\t\t\tref={this.storeInput}\r\n\t\t\t\tvalue={this.format(value)}\r\n\t\t\t\tonChange={this.onChange}/>\r\n\t\t)\r\n\t}\r\n}"]}