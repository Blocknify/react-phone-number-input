{"version":3,"sources":["../source/PhoneInput.js"],"names":["PhoneNumberInput","props","value","country","countries","labels","international","metadata","internationalIcon","Error","parsed_number","pre_selected_country","state","country_select_options","generate_country_select_options","parsed_input","generateParsedInput","new_country","onCountryChange","name","disabled","autoComplete","countrySelectTabIndex","showCountrySelect","style","className","inputClassName","getInputClassName","countrySelectProperties","error","indicateInvalid","CountrySelectComponent","countrySelectComponent","inputComponent","smartCaret","ext","_","flags","flagComponent","flagsPath","displayInitialValueAsLocalNumber","countrySelectHidesPhoneInputField","locale","phoneNumberInputProps","hidePhoneInputField","InputComponent","_countrySelectProps","key","hasOwnProperty","storeCountrySelectInstance","undefined","onCountrySelected","focus","storePhoneNumberInputInstance","onChange","onBlur","onPhoneNumberKeyDown","invalid","cloneElement","type","hasChangedCountry","old_default_country","old_value","new_default_country","new_value","new_state","propTypes","string","func","isRequired","onKeyDown","bool","arrayOf","objectOf","number","object","node","shape","country_calling_codes","defaultProps","old_parsed_input","old_country","new_parsed_input","setState","event","_event","target","stopPropagation","preventDefault","hide","number_input","country_select","map","label","icon","createCountrySelectOptionIconComponent","FlagComponent","InternationalIcon"],"mappings":"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","file":"PhoneInput.js","sourcesContent":["import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { polyfill as reactLifecyclesCompat } from 'react-lifecycles-compat'\r\nimport classNames from 'classnames'\r\n\r\nimport InputSmart from './InputSmart'\r\nimport InputBasic from './InputBasic'\r\n\r\nimport InternationalIcon from './InternationalIcon'\r\nimport FlagComponent from './Flag'\r\n\r\nimport\r\n{\r\n\tgetPreSelectedCountry,\r\n\tgetCountrySelectOptions,\r\n\tparsePhoneNumber,\r\n\tgenerateNationalNumberDigits,\r\n\tmigrateParsedInputForNewCountry,\r\n\tgetCountryForParsedInput,\r\n\te164\r\n}\r\nfrom './input-control'\r\n\r\nimport { countries } from './countries'\r\n\r\n// Allows passing custom `libphonenumber-js` metadata\r\n// to reduce the overall bundle size.\r\n@reactLifecyclesCompat\r\nexport default class PhoneNumberInput extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// Phone number in E.164 format.\r\n\t\t// E.g. \"+12223333333\" for USA.\r\n\t\tvalue : PropTypes.string,\r\n\r\n\t\t// `onChange` handler is called each time\r\n\t\t// the phone number `<input/>` is edited.\r\n\t\tonChange : PropTypes.func.isRequired,\r\n\r\n\t\t// `onBlur` is usually passed by `redux-form`.\r\n\t\tonBlur : PropTypes.func,\r\n\r\n\t\t// `onKeyDown` handler (e.g. to handle Enter key press).\r\n\t\tonKeyDown : PropTypes.func,\r\n\r\n\t\t// Some people requested an `onCountryChange` event listener.\r\n\t\t// No valid reason was given other than compliance with some legacy code\r\n\t\t// which stored both phone number and country in a database.\r\n\t\t// https://github.com/catamphetamine/react-phone-number-input/issues/128\r\n\t\tonCountryChange : PropTypes.func,\r\n\r\n\t\t// Disables both the phone number `<input/>`\r\n\t\t// and the country `<select/>`.\r\n\t\t// (is `false` by default)\r\n\t\tdisabled : PropTypes.bool.isRequired,\r\n\r\n\t\t// Web browser's \"autocomplete\" feature\r\n\t\t// remembers the phone number being input\r\n\t\t// and can also autofill the `<input/>`\r\n\t\t// with previously remembered phone numbers.\r\n\t\t//\r\n\t\t// Default value: \"tel\".\r\n\t\t//\r\n\t\t// https://developers.google.com/web/updates/2015/06/checkout-faster-with-autofill\r\n\t\t//\r\n\t\t// \"So when should you use autocomplete=\"off\"?\r\n\t\t//  One example is when you've implemented your own version\r\n\t\t//  of autocomplete for search. Another example is any form field\r\n\t\t//  where users will input and submit different kinds of information\r\n\t\t//  where it would not be useful to have the browser remember\r\n\t\t//  what was submitted previously\".\r\n\t\t//\r\n\t\tautoComplete : PropTypes.string.isRequired,\r\n\r\n\t\t// Should the initially passed phone number `value`\r\n\t\t// be converted to a national phone number for its country.\r\n\t\t// (is `false` by default)\r\n\t\tdisplayInitialValueAsLocalNumber : PropTypes.bool.isRequired,\r\n\r\n\t\t// The country to be selected by default.\r\n\t\t// Two-letter country code (\"ISO 3166-1 alpha-2\").\r\n\t\tcountry : PropTypes.string,\r\n\r\n\t\t// Only these countries will be available for selection.\r\n\t\t// Includes all countries by default.\r\n\t\tcountries : PropTypes.arrayOf(PropTypes.string).isRequired,\r\n\r\n\t\t// Custom country `<select/>` option names.\r\n\t\t// E.g. `{ ZZ: 'Международный', RU: 'Россия', US: 'США', ... }`\r\n\t\tlabels : PropTypes.objectOf(PropTypes.string),\r\n\r\n\t\t// Country flag icon components.\r\n\t\t// By default flag icons are inserted as `<img/>`s\r\n\t\t// with their `src` pointed to `flag-icon-css` github repo.\r\n\t\t// There might be cases (e.g. an offline application)\r\n\t\t// where having a large (3 megabyte) `<svg/>` flags\r\n\t\t// bundle is more appropriate.\r\n\t\t// `import flags from 'react-phone-number-input/flags'`.\r\n\t\tflags : PropTypes.objectOf(PropTypes.func),\r\n\r\n\t\t// Flag icon component.\r\n\t\tflagComponent : PropTypes.func.isRequired,\r\n\r\n\t\t// A base URL path for national flag SVG icons.\r\n\t\t// By default it uses the ones from `flag-icon-css` github repo.\r\n\t\tflagsPath : PropTypes.string.isRequired,\r\n\r\n\t\t// Whether to add the \"International\" option\r\n\t\t// to the list of countries.\r\n\t\t// By default it's added if the list of `countries` hasn't been overridden.\r\n\t\tinternational : PropTypes.bool,\r\n\r\n\t\t// Custom \"International\" country `<select/>` option icon.\r\n\t\tinternationalIcon : PropTypes.func.isRequired,\r\n\r\n\t\t// Whether to show country `<select/>`.\r\n\t\t// (is `true` by default)\r\n\t\tshowCountrySelect : PropTypes.bool.isRequired,\r\n\r\n\t\t// HTML `tabindex` attribute for the country `<select/>`.\r\n\t\tcountrySelectTabIndex : PropTypes.number,\r\n\r\n\t\t// `<Phone/>` component CSS style object.\r\n\t\tstyle : PropTypes.object,\r\n\r\n\t\t// `<Phone/>` component CSS class.\r\n\t\tclassName : PropTypes.string,\r\n\r\n\t\t// `<input/>` CSS class.\r\n\t\t// Both for the phone number `<input/>` and\r\n\t\t// `react-responsive-ui` `<Select/>` autocomplete input.\r\n\t\tinputClassName : PropTypes.string,\r\n\r\n\t\t// Returns phone number `<input/>` CSS class string.\r\n\t\t// Receives an object of shape `{ disabled : boolean?, invalid : boolean? }`.\r\n\t\tgetInputClassName : PropTypes.func,\r\n\r\n\t\t// Country `<select/>` component.\r\n\t\t//\r\n\t\t// Receives properties:\r\n\t\t//\r\n\t\t// * `name : string?` — HTML `name` attribute.\r\n\t\t// * `value : string?` — The currently selected country code.\r\n\t\t// * `onChange(value : string?)` — Updates the `value`.\r\n\t\t// * `options : object[]` — The list of all selectable countries (including \"International\") each being an object of shape `{ value : string?, label : string, icon : React.Component }`.\r\n\t\t// * `disabled : boolean?` — HTML `disabled` attribute.\r\n\t\t// * `tabIndex : (number|string)?` — HTML `tabIndex` attribute.\r\n\t\t// * `className : string` — CSS class name.\r\n\t\t//\r\n\t\t// Optional properties (should be ignored unless needed):\r\n\t\t//\r\n\t\t// * `hidePhoneInputField(hide : boolean)` — Can be called to show/hide phone input field. Takes `hide : boolean` argument. E.g. `react-responsive-ui` `<Select/>` uses this to hide phone number input when country select is expanded.\r\n\t\t// * `focusPhoneInputField()` — Can be called to manually focus phone input field. E.g. `react-responsive-ui` `<Select/>` uses this to focus phone number input after country selection in a timeout (after the phone input field is no longer hidden).\r\n\t\t//\r\n\t\tcountrySelectComponent : PropTypes.func.isRequired,\r\n\r\n\t\t// Phone number `<input/>` component.\r\n\t\t//\r\n\t\t// Receives properties:\r\n\t\t//\r\n\t\t// * `value : string` — The parsed phone number. E.g.: `\"\"`, `\"+\"`, `\"+123\"`, `\"123\"`.\r\n\t\t// * `onChange(value : string)` — Updates the `value`.\r\n\t\t// * `country : string?` — The currently selected country. `undefined` means \"International\" (no country selected).\r\n\t\t// * `metadata : object` — `libphonenumber-js` metadata.\r\n\t\t// * All other properties should be passed through to the underlying `<input/>`.\r\n\t\t//\r\n\t\t// Must also implement `.focus()` method.\r\n\t\t//\r\n\t\tinputComponent : PropTypes.func,\r\n\r\n\t\t// Set to `false` to use `inputComponent={InputBasic}`\r\n\t\t// instead of `input-format`'s `<ReactInput/>`.\r\n\t\t// Is `true` by default.\r\n\t\tsmartCaret : PropTypes.bool.isRequired,\r\n\r\n\t\t// For example, `react-responsive-ui` `<Select/>`\r\n\t\t// hides the phone number input field when expanded.\r\n\t\t// Is `false` by default.\r\n\t\tcountrySelectHidesPhoneInputField : PropTypes.bool.isRequired,\r\n\r\n\t\t// Phone number extension element.\r\n\t\text : PropTypes.node,\r\n\r\n\t\t// An error message shown below the phone number `<input/>`.\r\n\t\terror : PropTypes.string,\r\n\r\n\t\t// The `error` is shown only when `indicateInvalid` is true.\r\n\t\tindicateInvalid : PropTypes.bool,\r\n\r\n\t\t// Translation.\r\n\t\tlocale : PropTypes.objectOf(PropTypes.string),\r\n\r\n\t\t// `libphonenumber-js` metadata\r\n\t\tmetadata : PropTypes.shape\r\n\t\t({\r\n\t\t\tcountry_calling_codes : PropTypes.object.isRequired,\r\n\t\t\tcountries : PropTypes.object.isRequired\r\n\t\t})\r\n\t\t.isRequired\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\t// Not disabled.\r\n\t\tdisabled: false,\r\n\r\n\t\t// Remember (and autofill) the value as a phone number.\r\n\t\tautoComplete: 'tel',\r\n\r\n\t\t// Include all countries.\r\n\t\tcountries,\r\n\r\n\t\t// Flag icon component.\r\n\t\tflagComponent: FlagComponent,\r\n\r\n\t\t// By default use icons from `flag-icon-css` github repo.\r\n\t\tflagsPath: 'https://lipis.github.io/flag-icon-css/flags/4x3/',\r\n\r\n\t\t// Default \"International\" country `<select/>` option icon (globe).\r\n\t\tinternationalIcon: InternationalIcon,\r\n\r\n\t\t// Show country `<select/>`.\r\n\t\tshowCountrySelect: true,\r\n\r\n\t\t// Don't convert the initially passed phone number `value`\r\n\t\t// to a national phone number for its country.\r\n\t\t// The reason is that the newer generation grows up when\r\n\t\t// there are no stationary phones and therefore everyone inputs\r\n\t\t// phone numbers with a `+` in their smartphones\r\n\t\t// so phone numbers written in international form\r\n\t\t// are gradually being considered more natural than local ones.\r\n\t\tdisplayInitialValueAsLocalNumber: false,\r\n\r\n\t\t// Set to `false` to use `inputComponent={InputBasic}`\r\n\t\t// instead of `input-format`'s `<ReactInput/>`.\r\n\t\t// Is `true` by default.\r\n\t\tsmartCaret : true,\r\n\r\n\t\t// `react-responsive-ui` `<Select/>` sets this to true\r\n\t\t// to hide the phone number input field when expanded.\r\n\t\tcountrySelectHidesPhoneInputField : false\r\n\t}\r\n\r\n\tconstructor(props)\r\n\t{\r\n\t\tsuper(props)\r\n\r\n\t\tconst\r\n\t\t{\r\n\t\t\tvalue,\r\n\t\t\tcountry,\r\n\t\t\tcountries,\r\n\t\t\tlabels,\r\n\t\t\tinternational,\r\n\t\t\tmetadata\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\t// Will be removed in version 2.x.\r\n\t\tif (typeof this.props.internationalIcon !== 'function')\r\n\t\t{\r\n\t\t\tthrow new Error(\"You're passing a custom `internationalIcon` property to `react-phone-number-input` component. In the latest version it may only be a React component (a class or a function), not a React element. Wrap `internationalIcon` into a function to resolve the error: `() => internationalIcon`.\")\r\n\t\t}\r\n\r\n\t\tconst parsed_number = parsePhoneNumber(value, metadata)\r\n\r\n\t\tconst pre_selected_country = getPreSelectedCountry\r\n\t\t(\r\n\t\t\tparsed_number,\r\n\t\t\tcountry,\r\n\t\t\tcountries,\r\n\t\t\tinternational,\r\n\t\t\tmetadata\r\n\t\t)\r\n\r\n\t\tthis.state =\r\n\t\t{\r\n\t\t\t// Workaround for `this.props` inside `getDerivedStateFromProps()`.\r\n\t\t\tprops : this.props,\r\n\r\n\t\t\t// The country selected.\r\n\t\t\tcountry : pre_selected_country,\r\n\r\n\t\t\t// Generate country `<select/>` options.\r\n\t\t\tcountry_select_options : generate_country_select_options(this.props),\r\n\r\n\t\t\t// `parsed_input` state property holds non-formatted user's input.\r\n\t\t\t// The reason is that there's no way of finding out\r\n\t\t\t// in which form should `value` be displayed: international or national.\r\n\t\t\t// E.g. if `value` is `+78005553535` then it could be input\r\n\t\t\t// by a user both as `8 (800) 555-35-35` and `+7 800 555 35 35`.\r\n\t\t\t// Hence storing just `value`is not sufficient for correct formatting.\r\n\t\t\t// E.g. if a user entered `8 (800) 555-35-35`\r\n\t\t\t// then value is `+78005553535` and `parsed_input` is `88005553535`\r\n\t\t\t// and if a user entered `+7 800 555 35 35`\r\n\t\t\t// then value is `+78005553535` and `parsed_input` is `+78005553535`.\r\n\t\t\tparsed_input : generateParsedInput(value, parsed_number, this.props),\r\n\r\n\t\t\t// `value` property is duplicated in state.\r\n\t\t\t// The reason is that `getDerivedStateFromProps()`\r\n\t\t\t// needs this `value` to compare to the new `value` property\r\n\t\t\t// to find out if `parsed_input` needs updating:\r\n\t\t\t// If the `value` property changed externally\r\n\t\t\t// then it won't be equal to state `value`\r\n\t\t\t// in which case `parsed_input` and `country` get updated.\r\n\t\t\tvalue\r\n\t\t}\r\n\t}\r\n\r\n\t// Country `<select/>` `onChange` handler.\r\n\tonCountrySelected = (new_country) =>\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tmetadata,\r\n\t\t\tonChange,\r\n\t\t\tcountrySelectHidesPhoneInputField\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tconst\r\n\t\t{\r\n\t\t\tparsed_input : old_parsed_input,\r\n\t\t\tcountry      : old_country\r\n\t\t}\r\n\t\t= this.state\r\n\r\n\t\t// After the new `country` has been selected,\r\n\t\t// if the phone number `<input/>` holds any digits\r\n\t\t// then migrate those digits for the new `country`.\r\n\t\tconst new_parsed_input = migrateParsedInputForNewCountry\r\n\t\t(\r\n\t\t\told_parsed_input,\r\n\t\t\told_country,\r\n\t\t\tnew_country,\r\n\t\t\tmetadata\r\n\t\t)\r\n\r\n\t\tconst new_value = e164(new_parsed_input, new_country, metadata)\r\n\r\n\t\tthis.onCountryChange(new_country)\r\n\r\n\t\t// Focus the phone number `<input/>` upon country selection.\r\n\t\t// The default behaviour.\r\n\t\tif (!countrySelectHidesPhoneInputField) {\r\n\t\t\tthis.focus()\r\n\t\t}\r\n\r\n\t\tthis.setState\r\n\t\t({\r\n\t\t\tcountry           : new_country,\r\n\t\t\thasChangedCountry : true,\r\n\t\t\tparsed_input      : new_parsed_input,\r\n\t\t\tvalue             : new_value\r\n\t\t},\r\n\t\t() =>\r\n\t\t{\r\n\t\t\t// Update the new `value` property.\r\n\t\t\t// Doing it after the `state` has been updated\r\n\t\t\t// because `onChange()` will trigger `getDerivedStateFromProps()`\r\n\t\t\t// with the new `value` which will be compared to `state.value` there.\r\n\t\t\tonChange(new_value)\r\n\r\n\t\t\t// Focus the phone number `<input/>` upon country selection.\r\n\t\t\t// Doing it in a `setState()` callback because the phone number\r\n\t\t\t// `<input/>` is hidden while country `<select/>` is expanded.\r\n\t\t\tif (countrySelectHidesPhoneInputField) {\r\n\t\t\t\tthis.focus()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// Phone number `<input/>` `onKeyDown` handler.\r\n\tonPhoneNumberKeyDown = (event) =>\r\n\t{\r\n\t\tconst { onKeyDown } = this.props\r\n\r\n\t\t// Actually \"Down arrow\" key is used for showing \"autocomplete\" (\"autofill\") options.\r\n\t\t// (e.g. previously entered phone numbers for `autoComplete=\"tel\"`)\r\n\t\t// // Expand country `<select/>`` on \"Down arrow\" key press.\r\n\t\t// if (event.keyCode === 40) {\r\n\t\t// \tthis.country_select.toggle()\r\n\t\t// }\r\n\r\n\t\tif (onKeyDown) {\r\n\t\t\tonKeyDown(event)\r\n\t\t}\r\n\t}\r\n\r\n\t// `<input/>` `onChange` handler.\r\n\t// Updates `value` property accordingly.\r\n\t// (so that they are kept in sync).\r\n\t// `parsed_input` must be a parsed phone number\r\n\t// or an empty string.\r\n\t// E.g.: `\"\"`, `\"+\"`, `\"+123\"`, `\"123\"`.\r\n\tonChange = (parsed_input) =>\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tonChange,\r\n\t\t\tcountries,\r\n\t\t\tinternational,\r\n\t\t\tmetadata\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tlet { country } = this.state\r\n\r\n\t\tif (parsed_input)\r\n\t\t{\r\n\t\t\t// If the phone number being input is an international one\r\n\t\t\t// then tries to derive the country from the phone number.\r\n\t\t\t// (regardless of whether there's any country currently selected)\r\n\t\t\tif (parsed_input[0] === '+')\r\n\t\t\t{\r\n\t\t\t\tcountry = getCountryForParsedInput\r\n\t\t\t\t(\r\n\t\t\t\t\tparsed_input,\r\n\t\t\t\t\tcountry,\r\n\t\t\t\t\tcountries,\r\n\t\t\t\t\tinternational,\r\n\t\t\t\t\tmetadata\r\n\t\t\t\t)\r\n\r\n\t\t\t\tthis.onCountryChange(country)\r\n\t\t\t}\r\n\t\t\t// If this `onChange()` event was triggered\r\n\t\t\t// as a result of selecting \"International\" country\r\n\t\t\t// then force-prepend a `+` sign if the phone number\r\n\t\t\t// `<input/>` value isn't in international format.\r\n\t\t\telse if (!country)\r\n\t\t\t{\r\n\t\t\t\tparsed_input = '+' + parsed_input\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Generate the new `value` property.\r\n\t\tconst value = e164(parsed_input, country, metadata)\r\n\r\n\t\tthis.setState\r\n\t\t({\r\n\t\t\tparsed_input,\r\n\t\t\tvalue,\r\n\t\t\tcountry\r\n\t\t},\r\n\t\t// Update the new `value` property.\r\n\t\t// Doing it after the `state` has been updated\r\n\t\t// because `onChange()` will trigger `getDerivedStateFromProps()`\r\n\t\t// with the new `value` which will be compared to `state.value` there.\r\n\t\t() => onChange(value))\r\n\t}\r\n\r\n\t// This `onBlur` interceptor is a workaround for `redux-form`\r\n\t// so that it gets the up-to-date `value` in its `onBlur` handler.\r\n\t// Without this fix it just gets the actual (raw) input field textual value.\r\n\t// E.g. `+7 800 555 35 35` instead of `+78005553535`.\r\n\t//\r\n\t// A developer is not supposed to pass this `onBlur` property manually.\r\n\t// Instead, `redux-form` passes `onBlur` to this component automatically\r\n\t// and this component patches that `onBlur` handler (a hacky way but works).\r\n\t//\r\n\tonBlur = (event) =>\r\n\t{\r\n\t\tconst { onBlur } = this.props\r\n\t\tconst { value } = this.state\r\n\r\n\t\tif (!onBlur) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// `event` is React's `SyntheticEvent`.\r\n\t\t// Its `.value` is read-only therefore cloning it.\r\n\t\tconst _event =\r\n\t\t{\r\n\t\t\t...event,\r\n\t\t\ttarget:\r\n\t\t\t{\r\n\t\t\t\t...event.target,\r\n\t\t\t\tvalue\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// For `redux-form` event detection.\r\n\t\t// https://github.com/erikras/redux-form/blob/v5/src/events/isEvent.js\r\n\t\t_event.stopPropagation = event.stopPropagation\r\n\t\t_event.preventDefault  = event.preventDefault\r\n\r\n\t\treturn onBlur(_event)\r\n\t}\r\n\r\n\t// When country `<select/>` is toggled.\r\n\thidePhoneInputField = (hide) =>\r\n\t{\r\n\t\tthis.setState({\r\n\t\t\thidePhoneInputField: hide\r\n\t\t})\r\n\t}\r\n\r\n\t// Some people requested an `onCountryChange` event listener.\r\n\t// No valid reason was given other than compliance with some legacy code\r\n\t// which stored both phone number and country in a database.\r\n\t// https://github.com/catamphetamine/react-phone-number-input/issues/128\r\n\tonCountryChange(new_country)\r\n\t{\r\n\t\tconst { onCountryChange } = this.props\r\n\t\tconst { country } = this.state\r\n\r\n\t\tif (onCountryChange && new_country !== country)\r\n\t\t{\r\n\t\t\tonCountryChange(new_country)\r\n\t\t}\r\n\t}\r\n\r\n\t// Can be called externally.\r\n\tfocus = () => this.number_input.focus()\r\n\r\n\tstoreCountrySelectInstance = _ => this.country_select = _\r\n\r\n\tstorePhoneNumberInputInstance = _ => this.number_input = _\r\n\r\n\tstatic getDerivedStateFromProps(props, state)\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tcountry,\r\n\t\t\thasChangedCountry,\r\n\t\t\tvalue,\r\n\t\t\tprops:\r\n\t\t\t{\r\n\t\t\t\tcountry : old_default_country,\r\n\t\t\t\tvalue   : old_value\r\n\t\t\t}\r\n\t\t}\r\n\t\t= state\r\n\r\n\t\tconst\r\n\t\t{\r\n\t\t\tmetadata,\r\n\t\t\tcountry : new_default_country,\r\n\t\t\tvalue   : new_value\r\n\t\t}\r\n\t\t= props\r\n\r\n\t\t// Emulate `prevProps` via `state.props`.\r\n\t\tconst new_state = { props }\r\n\r\n\t\t// If `countries` or `labels` or `international` changed\r\n\t\t// then re-generate country `<select/>` options.\r\n\t\tif (props.countries !== state.props.countries ||\r\n\t\t\tprops.labels !== state.props.labels ||\r\n\t\t\tprops.international !== state.props.international)\r\n\t\t{\r\n\t\t\tnew_state.country_select_options = generate_country_select_options(props)\r\n\t\t}\r\n\r\n\t\t// If the default country changed.\r\n\t\t// (e.g. in case of ajax GeoIP detection after page loaded)\r\n\t\t// then select it but only if the user didn't previously select\r\n\t\t// another country and no phone number has been entered so far.\r\n\t\t// Because if the user has already started inputting a phone number\r\n\t\t// then he's okay with no country being selected at all (\"International\")\r\n\t\t// and doesn't want to be disturbed, doesn't want his input to be screwed, etc.\r\n\t\tif (new_default_country !== old_default_country && !hasChangedCountry && !value && !new_value)\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\t...new_state,\r\n\t\t\t\tcountry : new_default_country\r\n\t\t\t}\r\n\t\t}\r\n\t\t// If a new `value` is set externally.\r\n\t\t// (e.g. as a result of an ajax API request\r\n\t\t//  to get user's phone after page loaded)\r\n\t\t// The first part — `new_value !== old_value` —\r\n\t\t// is basically `props.value !== prevProps.value`\r\n\t\t// so it means \"if value property was changed externally\".\r\n\t\t// The second part — `new_value !== value` —\r\n\t\t// is for ignoring the `getDerivedStateFromProps()` call\r\n\t\t// which happens in `this.onChange()` right after `this.setState()`.\r\n\t\t// If this `getDerivedStateFromProps()` call isn't ignored\r\n\t\t// then the country flag would reset on each input.\r\n\t\telse if (new_value !== old_value && new_value !== value)\r\n\t\t{\r\n\t\t\tconst parsed_number = parsePhoneNumber(new_value, metadata)\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...new_state,\r\n\t\t\t\tparsed_input : generateParsedInput(new_value, parsed_number, props),\r\n\t\t\t\tvalue : new_value,\r\n\t\t\t\tcountry : new_value ? parsed_number.country : country\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Maybe `new_state.country_select_options` changed.\r\n\t\t// In any case, update `prevProps`.\r\n\t\treturn new_state\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tname,\r\n\t\t\tdisabled,\r\n\t\t\tautoComplete,\r\n\t\t\tcountrySelectTabIndex,\r\n\t\t\tshowCountrySelect,\r\n\t\t\tstyle,\r\n\t\t\tclassName,\r\n\t\t\tinputClassName,\r\n\t\t\tgetInputClassName,\r\n\t\t\tcountrySelectProperties,\r\n\r\n\t\t\terror,\r\n\t\t\tindicateInvalid,\r\n\r\n\t\t\tcountrySelectComponent : CountrySelectComponent,\r\n\t\t\tinputComponent,\r\n\t\t\tsmartCaret,\r\n\t\t\text,\r\n\r\n\t\t\t// Extract `phoneNumberInputProps` via \"object rest spread\":\r\n\t\t\tcountries,\r\n\t\t\tlabels,\r\n\t\t\tcountry : _,\r\n\t\t\tflags,\r\n\t\t\tflagComponent,\r\n\t\t\tflagsPath,\r\n\t\t\tinternational,\r\n\t\t\tinternationalIcon,\r\n\t\t\tdisplayInitialValueAsLocalNumber,\r\n\t\t\tonCountryChange,\r\n\t\t\tcountrySelectHidesPhoneInputField,\r\n\t\t\tlocale,\r\n\t\t\tmetadata,\r\n\t\t\t...phoneNumberInputProps\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tconst\r\n\t\t{\r\n\t\t\tcountry,\r\n\t\t\thidePhoneInputField,\r\n\t\t\tcountry_select_options,\r\n\t\t\tparsed_input\r\n\t\t}\r\n\t\t= this.state\r\n\r\n\t\tconst InputComponent = inputComponent || (smartCaret ? InputSmart : InputBasic)\r\n\r\n\t\t// Extract `countrySelectProperties` from `this.props`\r\n\t\t// also removing them from `phoneNumberInputProps`.\r\n\t\tconst _countrySelectProps = {}\r\n\t\tif (countrySelectProperties)\r\n\t\t{\r\n\t\t\tfor (const key in countrySelectProperties)\r\n\t\t\t{\r\n\t\t\t\tif (this.props.hasOwnProperty(key))\r\n\t\t\t\t{\r\n\t\t\t\t\t_countrySelectProps[countrySelectProperties[key]] = this.props[key]\r\n\t\t\t\t\tdelete phoneNumberInputProps[key]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tstyle={ style }\r\n\t\t\t\tclassName={ classNames('react-phone-number-input',\r\n\t\t\t\t{\r\n\t\t\t\t\t'react-phone-number-input--invalid': error && indicateInvalid\r\n\t\t\t\t},\r\n\t\t\t\tclassName) }>\r\n\r\n\t\t\t\t{/* Country `<select/>` and phone number `<input/>` */}\r\n\t\t\t\t<div className=\"react-phone-number-input__row\">\r\n\r\n\t\t\t\t\t{/* Country `<select/>` */}\r\n\t\t\t\t\t{ showCountrySelect &&\r\n\t\t\t\t\t\t<CountrySelectComponent\r\n\t\t\t\t\t\t\t{..._countrySelectProps}\r\n\t\t\t\t\t\t\tref={ this.storeCountrySelectInstance }\r\n\t\t\t\t\t\t\tname={ name ? `${name}__country` : undefined }\r\n\t\t\t\t\t\t\tvalue={ country }\r\n\t\t\t\t\t\t\toptions={ country_select_options }\r\n\t\t\t\t\t\t\tonChange={ this.onCountrySelected }\r\n\t\t\t\t\t\t\tdisabled={ disabled }\r\n\t\t\t\t\t\t\ttabIndex={ countrySelectTabIndex }\r\n\t\t\t\t\t\t\thidePhoneInputField={ this.hidePhoneInputField }\r\n\t\t\t\t\t\t\tfocusPhoneInputField={ this.focus }\r\n\t\t\t\t\t\t\tclassName=\"react-phone-number-input__country\"/>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{/* Phone number `<input/>` */}\r\n\t\t\t\t\t{ !hidePhoneInputField &&\r\n\t\t\t\t\t\t<InputComponent\r\n\t\t\t\t\t\t\ttype=\"tel\"\r\n\t\t\t\t\t\t\tname={ name }\r\n\t\t\t\t\t\t\t{ ...phoneNumberInputProps }\r\n\t\t\t\t\t\t\tref={ this.storePhoneNumberInputInstance }\r\n\t\t\t\t\t\t\tmetadata={ metadata }\r\n\t\t\t\t\t\t\tcountry={ country }\r\n\t\t\t\t\t\t\tvalue={ parsed_input || '' }\r\n\t\t\t\t\t\t\tonChange={ this.onChange }\r\n\t\t\t\t\t\t\tonBlur={ this.onBlur }\r\n\t\t\t\t\t\t\tonKeyDown={ this.onPhoneNumberKeyDown }\r\n\t\t\t\t\t\t\tdisabled={ disabled }\r\n\t\t\t\t\t\t\tautoComplete={ autoComplete }\r\n\t\t\t\t\t\t\tclassName={ classNames\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t'react-phone-number-input__phone',\r\n\t\t\t\t\t\t\t\t// Will be uncommented for version 2.x\r\n\t\t\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t\t\t// \t'react-phone-number-input__phone--disabled' : disabled,\r\n\t\t\t\t\t\t\t\t// \t'react-phone-number-input__phone--invalid'  : error && indicateInvalid\r\n\t\t\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t\t\tinputClassName,\r\n\t\t\t\t\t\t\t\tgetInputClassName && getInputClassName({ disabled, invalid: error && indicateInvalid })\r\n\t\t\t\t\t\t\t) }/>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{/* Phone extension `<input/>` */}\r\n\t\t\t\t\t{ ext && !hidePhoneInputField &&\r\n\t\t\t\t\t\t<label className=\"react-phone-number-input__ext\">\r\n\t\t\t\t\t\t\t{labels && labels.ext || 'ext.'}\r\n\t\t\t\t\t\t\t{React.cloneElement(ext,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttype : ext.props.type === undefined ? 'number' : ext.props.type,\r\n\t\t\t\t\t\t\t\tclassName : classNames\r\n\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t'react-phone-number-input__ext-input',\r\n\t\t\t\t\t\t\t\t\t// Will be uncommented for version 2.x\r\n\t\t\t\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t\t\t\t// \t'react-phone-number-input__phone--disabled' : disabled,\r\n\t\t\t\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t\t\t\tinputClassName,\r\n\t\t\t\t\t\t\t\t\tgetInputClassName && getInputClassName({ disabled }),\r\n\t\t\t\t\t\t\t\t\text.props.className\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Error message */}\r\n\t\t\t\t{ error && indicateInvalid &&\r\n\t\t\t\t\t<div className={ classNames('react-phone-number-input__error', 'rrui__input-error') }>\r\n\t\t\t\t\t\t{ error }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n// Generates country `<select/>` options.\r\nfunction generate_country_select_options(props)\r\n{\r\n\tconst\r\n\t{\r\n\t\tcountries,\r\n\t\tlabels,\r\n\t\tinternational\r\n\t}\r\n\t= props\r\n\r\n\treturn getCountrySelectOptions\r\n\t(\r\n\t\tcountries,\r\n\t\tlabels,\r\n\t\tinternational\r\n\t)\r\n\t.map(({ value, label }) =>\r\n\t({\r\n\t\tvalue,\r\n\t\tlabel,\r\n\t\ticon : createCountrySelectOptionIconComponent(value, label, props)\r\n\t}))\r\n}\r\n\r\nfunction createCountrySelectOptionIconComponent(value, label, props)\r\n{\r\n\tconst\r\n\t{\r\n\t\tflags,\r\n\t\tflagsPath,\r\n\t\tflagComponent : FlagComponent,\r\n\t\tinternationalIcon : InternationalIcon\r\n\t}\r\n\t= props\r\n\r\n\tif (value)\r\n\t{\r\n\t\treturn (props) => (\r\n\t\t\t<FlagComponent\r\n\t\t\t\tcountry={value}\r\n\t\t\t\tflags={flags}\r\n\t\t\t\tflagsPath={flagsPath}\r\n\t\t\t\tclassName={props ? props.className : undefined}/>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (props) => (\r\n\t\t<div\r\n\t\t\tclassName={classNames\r\n\t\t\t(\r\n\t\t\t\t'react-phone-number-input__icon',\r\n\t\t\t\t'react-phone-number-input__icon--international',\r\n\t\t\t\tprops && props.className\r\n\t\t\t)}>\r\n\t\t\t<InternationalIcon/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nfunction generateParsedInput(value, parsed_number, props)\r\n{\r\n\tconst\r\n\t{\r\n\t\tdisplayInitialValueAsLocalNumber,\r\n\t\tmetadata\r\n\t}\r\n\t= props\r\n\r\n\t// If the `value` (E.164 phone number)\r\n\t// belongs to the currently selected country\r\n\t// and `displayInitialValueAsLocalNumber` property is `true`\r\n\t// then convert `value` (E.164 phone number)\r\n\t// to a local phone number digits.\r\n\t// E.g. '+78005553535' -> '88005553535'.\r\n\tif (displayInitialValueAsLocalNumber && parsed_number.country)\r\n\t{\r\n\t\treturn generateNationalNumberDigits(parsed_number, metadata)\r\n\t}\r\n\r\n\treturn value\r\n}"]}